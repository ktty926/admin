<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jk.mapper.OrderMapper">

    <select id="findOrderByCount" resultType="java.lang.Long" parameterType="map">
        select count(1) from accept_order
        <include refid="queryOrder"></include>
    </select>

    <select id="findOrder" parameterType="hashmap" resultType="com.jk.bean.Order">

        select * from accept_order
        <include refid="queryOrder"></include>
        limit #{page},#{limit}
    </select>

    <sql id="queryOrder">

        <where>
            and user_id = #{order.userId}
            <!-- 订单号查询 -->
            <if test="order.status == 1 and order.orderNumber != null and order.orderNumber != ''">
                and order_number like '%${order.orderNumber}%'
            </if>

            <!-- 发货人查询 -->
            <if test="order.status == 2 and order.orderNumber != null and order.orderNumber != ''">
                and sender like '%${order.orderNumber}%'
            </if>

            <!-- 发货人手机号 -->
            <if test="order.status == 3 and order.orderNumber != null and order.orderNumber != ''">
                and sender_phone_number like '%${order.orderNumber}%'
            </if>
        </where>

    </sql>

</mapper>